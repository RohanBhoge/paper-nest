import React, { useState } from 'react';
import Sidebar from '../Components/Notes/Layout/Sidebar';
import TopBar from '../Components/Notes/Layout/TopBar';
import DashboardContent from '../Components/Notes/Dashboard/DashboardContent';
import ExamSelection from '../Components/Notes/Exam/ExamSelection';
import ChaptersPage from '../Components/Notes/Chapters/ChaptersPage';
import NotesModal from '../Components/Notes/Modal/NotesModal';
import QuizSection from '../Components/Notes/Quiz/QuizSection';

const NotesDashboard = () => {
  const [activeSection, setActiveSection] = useState('dashboard');
  const [selectedExam, setSelectedExam] = useState(null);
  const [selectedSubject, setSelectedSubject] = useState(null);
  const [modalOpen, setModalOpen] = useState(false);
  const [modalContent, setModalContent] = useState('');
  const [isSidebarOpen, setIsSidebarOpen] = useState(false);

  // Sample data
  const notices = [
    { text: "Class 12 Pre-Boards from 20 Sept.", isNew: true },
    { text: "Physics Lab sessions start next week", isNew: true },
    { text: "Chemistry doubt clearing session on Friday", isNew: false },
    { text: "Mathematics Mock Test - 25th September", isNew: false },
    { text: "Biology Chapter revision classes", isNew: false },
    { text: "Annual Science Exhibition preparations", isNew: false },
    { text: "Parent-Teacher meeting scheduled for October 5th", isNew: true },
    { text: "Holiday homework submission deadline", isNew: false }
  ];

  const examSubjects = {
    CET: ['Physics', 'Chemistry', 'Mathematics'],
    JEE: ['Physics', 'Chemistry', 'Mathematics'],
    NEET: ['Physics', 'Chemistry', 'Biology']
  };

  const chapters = {
    Physics: [
      'Motion in a Straight Line', 'Motion in a Plane', 'Laws of Motion', 'Work, Energy and Power',
      'System of Particles', 'Rotational Motion', 'Gravitation', 'Mechanical Properties',
      'Oscillations', 'Waves', 'Electrostatics', 'Current Electricity', 'Magnetism'
    ],
    Chemistry: [
      'Some Basic Concepts', 'Structure of Atom', 'Classification of Elements',
      'Chemical Bonding', 'States of Matter', 'Thermodynamics', 'Equilibrium', 'Redox Reactions',
      'Organic Chemistry Basics', 'Hydrocarbons', 'Alcohols and Phenols'
    ],
    Biology: [
      'The Living World', 'Biological Classification', 'Plant Kingdom', 'Animal Kingdom',
      'Morphology of Plants', 'Anatomy of Plants', 'Structural Organisation', 'Cell: Unit of Life',
      'Genetics', 'Evolution', 'Human Physiology'
    ],
    Mathematics: [
      'Sets', 'Relations and Functions', 'Trigonometric Functions', 'Principle of Mathematical Induction',
      'Complex Numbers', 'Linear Inequalities', 'Permutations and Combinations', 'Binomial Theorem',
      'Probability', 'Matrices and Determinants'
    ]
  };

  const handleExamClick = (exam) => {
    setSelectedExam(exam);
    setSelectedSubject(null);
    setActiveSection('exam');
    setIsSidebarOpen(false);
  };

  const handleSubjectClick = (subject) => {
    setSelectedSubject(subject);
    setActiveSection('chapters');
    setIsSidebarOpen(false);
  };

  const openNotesModal = (chapter) => {
    setModalContent(chapter);
    setModalOpen(true);
  };

  return (
    <div className="flex h-screen bg-slate-50">
      <TopBar setIsSidebarOpen={setIsSidebarOpen} />

      <Sidebar
        isSidebarOpen={isSidebarOpen}
        setIsSidebarOpen={setIsSidebarOpen}
        activeSection={activeSection}
        setActiveSection={setActiveSection}
      />

      {isSidebarOpen && (
        <div
          onClick={() => setIsSidebarOpen(false)}
          className="fixed inset-0 bg-black/40 z-40 md:hidden"
        />
      )}

      <div className="flex-1 p-8 overflow-y-auto">
        {/* Dashboard */}
        {activeSection === 'dashboard' && (
          <>
            <DashboardContent notices={notices} handleExamClick={handleExamClick} />
            <QuizSection /> {/* Quick Quiz below notice board */}
          </>
        )}

        {/* Exam Selection */}
        {activeSection === 'exam' && selectedExam && (
          <ExamSelection
            selectedExam={selectedExam}
            examSubjects={examSubjects}
            setActiveSection={setActiveSection}
            handleSubjectClick={handleSubjectClick}
          />
        )}

        {/* Chapters */}
        {activeSection === 'chapters' && selectedSubject && (
          <ChaptersPage
            selectedExam={selectedExam}
            selectedSubject={selectedSubject}
            chapters={chapters[selectedSubject]}
            setActiveSection={setActiveSection}
            openNotesModal={openNotesModal}
          />
        )}

        {/* Sections under development */}
        {(activeSection === 'settings' || activeSection === 'attendance') && (
          <div className="bg-white rounded-xl p-8 shadow-sm border text-center">
            <h1 className="text-2xl font-bold mb-4 capitalize">{activeSection}</h1>
            <p className="text-slate-500">This section is under development</p>
          </div>
        )}
      </div>

      {/* Notes Modal */}
      {modalOpen && (
        <NotesModal modalContent={modalContent} setModalOpen={setModalOpen} />
      )}
    </div>
  );
};

export default NotesDashboard;




//new dashboard

import React, { useState } from 'react';
import Sidebar from '../Components/Notes/Layout/Sidebar';
import TopBar from '../Components/Notes/Layout/TopBar';
import DashboardContent from '../Components/Notes/Dashboard/DashboardContent';
import ExamSelection from '../Components/Notes/Exam/ExamSelection';
import ChaptersPage from '../Components/Notes/Chapters/ChaptersPage';
import NotesModal from '../Components/Notes/Modal/NotesModal';
import QuizSection from '../Components/Notes/Quiz/QuizSection';

const chaptersData = {
  CET: {
    Physics: {
      "11th": [
        '1. Motion in a Straight Line',
        '2. Motion in a Plane',
        '3. Laws of Motion',
        '4. Work, Energy and Power',
        '5. System of Particles',
        '6. Rotational Motion',
        '7. Gravitation',
        '8. Mechanical Properties of Solids'
      ],
      "12th": [
        '1. Electrostatics',
        '2. Current Electricity',
        '3. Magnetism and Magnetic Effects of Current',
        '4. Electromagnetic Induction',
        '5. Alternating Currents',
        '6. Optics',
        '7. Dual Nature of Matter',
        '8. Atoms and Nuclei'
      ]
    },
    Chemistry: {
      "11th": [
        '1. Some Basic Concepts of Chemistry',
        '2. Structure of Atom',
        '3. Classification of Elements',
        '4. Chemical Bonding',
        '5. States of Matter',
        '6. Thermodynamics',
        '7. Equilibrium',
        '8. Redox Reactions'
      ],
      "12th": [
        '1. Solid State',
        '2. Solutions',
        '3. Electrochemistry',
        '4. Chemical Kinetics',
        '5. Surface Chemistry',
        '6. The Chemistry of Carbon Compounds',
        '7. Inorganic Chemistry',
        '8. Biomolecules'
      ]
    },
    Mathematics: {
      "11th": [
        '1. Sets',
        '2. Relations and Functions',
        '3. Trigonometric Functions',
        '4. Principle of Mathematical Induction',
        '5. Complex Numbers',
        '6. Linear Inequalities',
        '7. Permutations and Combinations',
        '8. Binomial Theorem'
      ],
      "12th": [
        '1. Matrices',
        '2. Determinants',
        '3. Differential Calculus',
        '4. Integral Calculus',
        '5. Vector Algebra',
        '6. Three Dimensional Geometry',
        '7. Probability',
        '8. Linear Programming'
      ]
    },
    Biology: {
      Zoology: {
        "11th": [
          '1. Diversity of Life',
          '2. Cell Structure & Function',
          '3. Animal Kingdom',
          '4. Human Physiology'
        ],
        "12th": [
          '1. Reproduction',
          '2. Genetics',
          '3. Human Health & Disease',
          '4. Biotechnology',
          '5. Ecology'
        ]
      },
      Botany: {
        "11th": [
          '1. Plant Morphology',
          '2. Plant Anatomy',
          '3. Plant Physiology'
        ],
        "12th": [
          '1. Reproduction in Plants',
          '2. Plant Biotechnology',
          '3. Plant Ecology'
        ]
      }
    }
  },

  JEE: {
    Physics: {
      "11th": [
        '1. Kinematics',
        '2. Laws of Motion',
        '3. Work, Energy and Power',
        '4. Motion of System of Particles',
        '5. Rotational Motion',
        '6. Gravitation',
        '7. Properties of Solids and Fluids',
        '8. Oscillations'
      ],
      "12th": [
        '1. Electrostatics',
        '2. Current Electricity',
        '3. Magnetism',
        '4. Electromagnetic Induction',
        '5. Alternating Currents',
        '6. Optics',
        '7. Modern Physics',
        '8. Thermodynamics'
      ]
    },
    Chemistry: {
      "11th": [
        '1. Atomic Structure',
        '2. Chemical Bonding',
        '3. States of Matter',
        '4. Thermodynamics',
        '5. Chemical Kinetics',
        '6. Equilibrium',
        '7. Redox Reactions',
        '8. Solutions'
      ],
      "12th": [
        '1. Solid State',
        '2. Electrochemistry',
        '3. Chemical Kinetics',
        '4. Surface Chemistry',
        '5. The Chemistry of Carbon Compounds',
        '6. Inorganic Chemistry',
        '7. Coordination Compounds',
        '8. Organic Chemistry'
      ]
    },
    Mathematics: {
      "11th": [
        '1. Sets',
        '2. Relations and Functions',
        '3. Trigonometry',
        '4. Complex Numbers',
        '5. Matrices',
        '6. Determinants',
        '7. Probability',
        '8. Vector Algebra'
      ],
      "12th": [
        '1. Differential Calculus',
        '2. Integral Calculus',
        '3. Three Dimensional Geometry',
        '4. Linear Programming',
        '5. Probability',
        '6. Mathematical Reasoning',
        '7. Differential Equations',
        '8. Vector Algebra'
      ]
    }
  },

  NEET: {
    Physics: {
      "11th": [
        '1. Physical World & Measurement',
        '2. Kinematics',
        '3. Laws of Motion',
        '4. Work, Energy and Power',
        '5. Motion of System of Particles',
        '6. Rotational Motion',
        '7. Gravitation',
        '8. Mechanical Properties of Solids'
      ],
      "12th": [
        '1. Electrostatics',
        '2. Current Electricity',
        '3. Magnetism and Magnetic Effects of Current',
        '4. Electromagnetic Induction',
        '5. Alternating Currents',
        '6. Optics',
        '7. Atoms and Nuclei',
        '8. Electronic Devices'
      ]
    },
    Chemistry: {
      "11th": [
        '1. Some Basic Concepts of Chemistry',
        '2. Structure of Atom',
        '3. Classification of Elements',
        '4. Chemical Bonding',
        '5. States of Matter',
        '6. Thermodynamics',
        '7. Equilibrium',
        '8. Redox Reactions'
      ],
      "12th": [
        '1. Solid State',
        '2. Solutions',
        '3. Electrochemistry',
        '4. Chemical Kinetics',
        '5. Surface Chemistry',
        '6. The Chemistry of Carbon Compounds',
        '7. Inorganic Chemistry',
        '8. Biomolecules'
      ]
    },
    Biology: {
      Zoology: {
        "11th": [
          '1. Diversity of Life',
          '2. Cell Structure & Function',
          '3. Animal Kingdom',
          '4. Human Physiology'
        ],
        "12th": [
          '1. Reproduction',
          '2. Genetics',
          '3. Human Health & Disease',
          '4. Biotechnology',
          '5. Ecology'
        ]
      },
      Botany: {
        "11th": [
          '1. Plant Morphology',
          '2. Plant Anatomy',
          '3. Plant Physiology'
        ],
        "12th": [
          '1. Reproduction in Plants',
          '2. Plant Biotechnology',
          '3. Plant Ecology'
        ]
      }
    }
  }
};

const examSubjects = {
  CET: ['Physics', 'Chemistry', 'Mathematics', 'Biology'], // Include Biology here
  JEE: ['Physics', 'Chemistry', 'Mathematics'],           // No Biology
  NEET: ['Physics', 'Chemistry', 'Biology']              // Include Biology
};

const NotesDashboard = () => {
  const [activeSection, setActiveSection] = useState('dashboard');
  const [selectedExam, setSelectedExam] = useState(null);
  const [selectedSubject, setSelectedSubject] = useState(null);
  const [chapters, setChapters] = useState({});
  const [modalOpen, setModalOpen] = useState(false);
  const [modalContent, setModalContent] = useState('');
  const [isSidebarOpen, setIsSidebarOpen] = useState(false);

  const notices = [
    { text: "Class 12 Pre-Boards from 20 Sept.", isNew: true },
    { text: "Physics Lab sessions start next week", isNew: true },
    { text: "Chemistry doubt clearing session on Friday", isNew: false },
    { text: "Mathematics Mock Test - 25th September", isNew: false },
    { text: "Biology Chapter revision classes", isNew: false },
    { text: "Annual Science Exhibition preparations", isNew: false },
    { text: "Parent-Teacher meeting scheduled for October 5th", isNew: true },
    { text: "Holiday homework submission deadline", isNew: false }
  ];

  const handleExamClick = (exam) => {
    setSelectedExam(exam);
    setSelectedSubject(null);
    setActiveSection('exam');
    setIsSidebarOpen(false);
  };

  const handleSubjectClick = (subject) => {
    setSelectedSubject(subject);
    const examData = chaptersData[selectedExam][subject];
    setChapters(examData);
    setActiveSection('chapters');
    setIsSidebarOpen(false);
  };

  const openNotesModal = (chapter) => {
    setModalContent(chapter);
    setModalOpen(true);
  };

  return (
    <div className="flex h-screen bg-slate-50">
      <TopBar setIsSidebarOpen={setIsSidebarOpen} />
      <Sidebar
        isSidebarOpen={isSidebarOpen}
        setIsSidebarOpen={setIsSidebarOpen}
        activeSection={activeSection}
        setActiveSection={setActiveSection}
      />

      {isSidebarOpen && (
        <div
          onClick={() => setIsSidebarOpen(false)}
          className="fixed inset-0 bg-black/40 z-40 md:hidden"
        />
      )}

      <div className="flex-1 p-8 overflow-y-auto">
        {activeSection === 'dashboard' && (
          <>
            <DashboardContent notices={notices} handleExamClick={handleExamClick} />
            <QuizSection />
          </>
        )}

        {activeSection === 'exam' && selectedExam && (
          <ExamSelection
            selectedExam={selectedExam}
            examSubjects={examSubjects}
            setActiveSection={setActiveSection}
            handleSubjectClick={handleSubjectClick}
          />
        )}

        {activeSection === 'chapters' && selectedSubject && (
          <ChaptersPage
            selectedExam={selectedExam}
            selectedSubject={selectedSubject}
            chapters={chapters}
            setActiveSection={setActiveSection}
            openNotesModal={openNotesModal}
          />
        )}
      </div>

      {modalOpen && <NotesModal modalContent={modalContent} setModalOpen={setModalOpen} />}
    </div>
  );
};

export default NotesDashboard;
